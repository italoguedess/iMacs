#+title: iMacs
#+author: Italo Guedes

* Starting the config file
:properties:
:header-args: :tangle init.el :comments org
:end:
** Let's start by setting/unsetting some basic things
don't forget to use C-M-x to apply the changes without having to restart emacs
#+begin_src emacs-lisp
    ;; disabling the default startup screen of Emacs
    (setq inhibit-startup-message t
          visible-bell t)
#+end_src

** Enabling/disabling some modes
#+begin_src emacs-lisp
  (tool-bar-mode -1)
  (scroll-bar-mode -1)
  (menu-bar-mode -1)
  (global-display-line-numbers-mode 1)
  (hl-line-mode 1)
  (blink-cursor-mode 1)
#+end_src

** Loading the theme (nothing too fancy yet)
#+begin_src emacs-lisp
  (load-theme 'modus-vivendi t)
#+end_src

** Setting the default font
#+begin_src emacs-lisp
  (set-face-attribute 'default nil :font "monospace" :height 120)
#+end_src

** Setting the packaging system
- adding melpa, org and elpa repositories
- use-package to keep things tidy
- and also set use-package automatically install our packages

#+begin_src emacs-lisp
  ;; Initialize package sources
  ;; brings into the environment all the packaging management functions
  (require 'package)

  ;; sets the package reposities which to pull from
  (setq package-archives '(("melpa" . "https://melpa.org/packages/")
                          ("org" . "https://orgmode.org/elpa/")
                          ("elpa" . "https://elpa.gnu.org/packages/")))

  ;; initializes the package system and prepares it to be used
  (package-initialize)
  ;; if there aren't contents in the package archive
  ;; (like in the first time this config is run)
  (unless package-archive-contents
    ;; refresh them
    (package-refresh-contents))

  ;; if the 'use-package' package isn't installed
  (unless (package-installed-p 'use-package)
    ;; installs it
    (package-install 'use-package))

  ;; requires 'use-package' to manage configurations and load packages
  (require 'use-package)
  ;; ensures that the packages used by 'use-package' are being installed
  (setq use-package-always-ensure t)
#+end_src

** Nice completion with Ivy
#+begin_src emacs-lisp
  (use-package ivy
               :diminish ;; hides ivy from the modes list in the Emacs mode line
               :config ;; executes code after the package is loaded
               (setq ivy-wrap t)
               (global-set-key (kbd "C-x b") 'counsel-switch-buffer)
               (counsel-mode 1)) ;; counsel is packaged with ivy and replaces some of the default commands with ivy enhanced ones
#+end_src

** Even nicer completions (like M-x functions comments and keybindings) with ivy-rich
#+begin_src emacs-lisp
  (use-package ivy-rich
               :diminish ;; hides ivy from the modes list in the Emacs mode line
               :config ;; executes code after the package is loaded
               (setcdr (assq t ivy-format-functions-alist) #'ivy-format-function-line)
               (ivy-rich-mode 1)) ;; enables ivy-mode
#+end_src


** Even even nicer completions, but now for keybindings with which-key
#+begin_src emacs-lisp
(use-package which-key
  :diminish ;; hides which-key from the modes list in the Emacs mode line
  :config ;; executes code after the package is loaded
  (which-key-mode 1)
  (setq which-key-idle-delay 0.2)) ;; waits a little before showing the suggestions
#+end_src

** More helpful help commands with the helpful package
#+begin_src emacs-lisp
  (use-package helpful
    :config
    (setq counsel-describe-function-function #'helpful-callable) ;; adding helpful to the counsel help commands
    (setq counsel-describe-variable-function #'helpful-variable)) ;; adding helpful to the counsel help commands
#+end_src


** Mode line bling with doom-modeline
To correctly display the icons in the modeline you also need to install the fonts, which can be done by typing:
#+begin_center
M-x all-the-icons-install-fonts
#+end_center
#+begin_src emacs-lisp
  (use-package doom-modeline
    :config
    (setq doom-modeline-height 15) ;; settings the modeline bar height
    (doom-modeline-mode 1)) ;; activate doom-modeline
  (use-package all-the-icons) ;; so that icons can be displayed in doom-modeline
#+end_src

** Vi keybindings are great
#+begin_src emacs-lisp
  (use-package evil
    :config
    (evil-mode 1))
#+end_src
